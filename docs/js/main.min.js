let selects=document.querySelectorAll(".form-select"),filters=document.querySelectorAll(".offers__select"),filterYear=document.querySelector(".offers__year"),filterMake=document.querySelector(".offers__make"),filterModel=document.querySelector(".offers__model"),filterTrim=document.querySelector(".offers__trim"),filtersBtn=document.querySelector(".offers__btn"),checkbox=document.querySelector(".offers__checkbox"),allCars=document.querySelectorAll(".car"),allCarsYear=document.querySelectorAll(".car__year"),allCarsMake=document.querySelectorAll(".car .card-title"),allCarsTrim=document.querySelectorAll(".car__trim"),selectedYear=filterYear.value,selectedMake=filterMake.value,selectedModel=filterModel.value,selectedTrim=filterTrim.value;filtersBtn.innerHTML=`${allCars.length} cars`,filtersBtn.addEventListener("click",filterCars);let subscrWrap=document.querySelector(".subscribe__input-wrap"),subscrInput=document.querySelector(".subscribe__input"),subscrInputMsg=document.querySelector(".subscribe__input-message"),subscrBtn=document.querySelector(".subscribe__btn");function deactSelects1(e){e.target.classList.contains("form-select")||selects.forEach(e=>e.classList.remove("active"))}function deactSelects2(){selects.forEach(e=>e.classList.remove("active"))}function activate(e){e.addEventListener("click",function(){let e="";this.classList.contains("active")&&(e="y"),selects.forEach(e=>e.classList.remove("active")),"y"===e?this.classList.remove("active"):this.classList.add("active")})}function filterCars(){let t=0;allCars.forEach(e=>e.classList.remove("hidden")),"0"!==selectedYear&&allCarsYear.forEach(e=>e.innerHTML!==selectedYear?e.closest(".car").classList.add("hidden"):0),"0"!==selectedMake&&allCarsMake.forEach(e=>e.innerHTML.split(" ")[0]!==selectedMake?e.closest(".car").classList.add("hidden"):0),"0"!==selectedModel&&allCarsMake.forEach(function(e){var t=e.innerHTML.split(" ").slice(1).join(" ");console.log(t),t!==selectedModel&&e.closest(".car").classList.add("hidden")}),"0"!==selectedTrim&&allCarsTrim.forEach(e=>e.innerHTML!==selectedTrim?e.closest(".car").classList.add("hidden"):0),allCars.forEach(e=>e.classList.contains("hidden")?0:t++),filtersBtn.innerHTML=`${t} cars`}function switcher(){let e=this.nextElementSibling;e.classList.contains("active")?e.classList.remove("active"):e.classList.add("active")}function styleInputOnFocus(){this.placeholder="",this.classList.remove("invalid-mail"),subscrWrap.classList.remove("invalid-mail"),subscrInputMsg.classList.remove("invalid-mail")}function validateMailOnInput(){this.value.match(/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/)?(this.classList.add("valid-mail"),subscrWrap.classList.add("valid-mail")):(this.classList.remove("valid-mail"),subscrWrap.classList.remove("valid-mail"))}function validateMailOnClick(){subscrInput.classList.contains("valid-mail")?(subscrInput.value="",subscrInput.classList.remove("valid-mail"),subscrWrap.classList.remove("valid-mail")):(subscrWrap.classList.add("invalid-mail"),subscrInput.classList.add("invalid-mail"),subscrInputMsg.classList.add("invalid-mail"))}document.addEventListener("click",deactSelects1),document.addEventListener("contextmenu",deactSelects2),document.addEventListener("visibilitychange",deactSelects2),filters.forEach(e=>activate(e)),checkbox.addEventListener("click",switcher),subscrInput.addEventListener("focus",styleInputOnFocus),subscrInput.addEventListener("blur",e=>e.target.placeholder="Enter your email"),subscrInput.addEventListener("input",validateMailOnInput),subscrBtn.addEventListener("click",validateMailOnClick),filterYear.addEventListener("change",function(){selectedYear=this.value}),filterMake.addEventListener("change",function(){selectedMake=this.value}),filterModel.addEventListener("change",function(){selectedModel=this.value}),filterTrim.addEventListener("change",function(){selectedTrim=this.value});