let selects=document.querySelectorAll(".offers__filter-wrap"),filters=document.querySelectorAll(".offers__select"),filtersBtn=document.querySelector(".offers__btn"),checkbox=document.querySelector(".offers__checkbox"),arrowUp=document.querySelector(".arrowUp"),arrowDown=document.querySelector(".arrowDown"),allCars=document.querySelectorAll(".car"),allCarsYear=document.querySelectorAll(".car__year"),allCarsMake=document.querySelectorAll(".car .card-title"),allCarsTrim=document.querySelectorAll(".car__trim"),allCarsMileage=document.querySelectorAll(".car__mileage"),allCarsSold=document.querySelectorAll(".car__sold-mark"),subscrWrap=document.querySelector(".subscribe__input-wrap"),subscrInput=document.querySelector(".subscribe__input"),subscrInputMsg=document.querySelector(".subscribe__input-message"),subscrBtn=document.querySelector(".subscribe__btn"),accordeonBtns=document.querySelectorAll(".accordion-button"),optStyled,parent,child;function hedeArrow(e){e.addEventListener("click",function(){this.classList.toggle("hide")})}function filterCars(){let t=0;allCars.forEach(function(e){e.classList.remove("hidden"),e.classList.contains("unavailable")&&e.classList.add("hidden")}),parent.classList.contains("offers__year-wrap")&&allCarsYear.forEach(e=>[e.innerHTML!==child.innerHTML?e.closest(".car").classList.add("hidden"):0]),parent.classList.contains("offers__make-wrap")&&allCarsMake.forEach(e=>[e.innerHTML.split(" ")[0]!==child.innerHTML?e.closest(".car").classList.add("hidden"):0]),parent.classList.contains("offers__model-wrap")&&allCarsMake.forEach(e=>[e.innerHTML.split(" ").slice(1).join(" ")!==child.innerHTML?e.closest(".car").classList.add("hidden"):0]),parent.classList.contains("offers__trim-wrap")&&allCarsTrim.forEach(e=>[e.innerHTML!==child.innerHTML?e.closest(".car").classList.add("hidden"):0]),allCars.forEach(e=>e.classList.contains("hidden")?0:t++),filtersBtn.innerHTML=`${t} cars`}function isInRange(e,t){return 0<e-t}function switcher(){let e=this.nextElementSibling;e.classList.contains("active")?e.classList.remove("active"):e.classList.add("active"),allCarsSold.forEach(e=>e.closest(".car").classList.toggle("unavailable"))}function styleInputOnFocus(){this.placeholder="",this.classList.remove("invalid-mail"),subscrWrap.classList.remove("invalid-mail"),subscrInputMsg.classList.remove("invalid-mail")}function validateMailOnInput(){this.value.match(/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/)?(this.classList.add("valid-mail"),subscrWrap.classList.add("valid-mail")):(this.classList.remove("valid-mail"),subscrWrap.classList.remove("valid-mail"))}function validateMailOnClick(){subscrInput.classList.contains("valid-mail")?(subscrInput.value="",subscrInput.classList.remove("valid-mail"),subscrWrap.classList.remove("valid-mail")):(subscrWrap.classList.add("invalid-mail"),subscrInput.classList.add("invalid-mail"),subscrInputMsg.classList.add("invalid-mail"))}function accordOnClick(e){e.addEventListener("click",function(){let e="";this.classList.contains("active")&&(e="y"),accordeonBtns.forEach(e=>e.classList.remove("active")),"y"===e?this.classList.remove("active"):this.classList.add("active")})}function styleSortingSelect(e){let t=document.querySelectorAll(e),c=e,i=/Year|Make|Model|Trim|Mileage/;t.forEach(function(e){let s=e.querySelectorAll("select")[0],l=document.createElement("DIV"),a=document.createElement("DIV");c.match(/sort/)?a.classList.add("select-styled-optSelected-sort"):a.classList.add("select-styled-optSelected-filter"),a.innerHTML=s.options[s.selectedIndex].innerHTML,e.append(a),c.match(/sort/)?l.classList.add("select-styled","select-styled-sort","select-styled-hide"):l.classList.add("select-styled","select-styled-filter","select-styled-hide");for(let t=0;t<s.length;t++)optStyled=document.createElement("DIV"),optStyled.innerHTML=s.options[t].innerHTML,optStyled.addEventListener("click",function(){for(let e=0;e<s.length;e++)if(s.options[t].innerHTML===this.innerHTML){s.selectedIndex=t,a.innerHTML=this.innerHTML,Array.from(l).forEach(e=>e.classList.remove()),this.classList.add("same-as-selected");break}checkSortingType(this.innerHTML),a.parentElement.classList.contains("offers__filter-wrap")&&(a.innerHTML.match(i)?(a.classList.remove("active"),a.classList.remove("active-opt")):a.classList.add("active-opt")),parent=this.parentNode.parentNode,child=parent.querySelector(".active-opt")}),l.append(optStyled);e.append(l),a.addEventListener("click",function(e){e.stopPropagation(),closeAllSelect(),this.nextSibling.classList.toggle("select-styled-hide")}),c.match(/filter/)&&a.addEventListener("click",function(){this.innerHTML.match(i)?(this.classList.add("active"),l.classList.add("titteHidden")):l.classList.remove("titteHidden")}),l.addEventListener("click",function(){a.classList.remove("active")})})}function closeAllSelect(){let e=document.querySelectorAll(".select-styled");e.forEach(e=>e.classList.add("select-styled-hide"))}function checkSortingType(e){e.match(/ascending/)?(arrowUp.classList.add("active"),arrowDown.classList.remove("active")):(arrowUp.classList.remove("active"),arrowDown.classList.add("active"))}styleSortingSelect(".select-styled-wrap.offers__sort-wrap"),styleSortingSelect(".select-styled-wrap.offers__filter-wrap"),document.addEventListener("click",closeAllSelect),selects.forEach(e=>hedeArrow(e)),filtersBtn.innerHTML=`${allCars.length} cars`,filtersBtn.addEventListener("click",filterCars),checkbox.addEventListener("click",switcher),subscrInput.addEventListener("focus",styleInputOnFocus),subscrInput.addEventListener("blur",e=>e.target.placeholder="Enter your email"),subscrInput.addEventListener("input",validateMailOnInput),subscrBtn.addEventListener("click",validateMailOnClick),accordeonBtns.forEach(e=>accordOnClick(e));