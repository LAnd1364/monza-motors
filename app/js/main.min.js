let selects=document.querySelectorAll(".form-select"),filters=document.querySelectorAll(".offers__select"),filterYear=document.querySelector(".offers__year"),filterMake=document.querySelector(".offers__make"),filterModel=document.querySelector(".offers__model"),filterTrim=document.querySelector(".offers__trim"),filterMileage=document.querySelector(".offers__mileage"),filtersBtn=document.querySelector(".offers__btn"),checkbox=document.querySelector(".offers__checkbox"),filterOffers=document.querySelector(".offers__sort"),arrowUp=document.querySelector(".arrowUp"),arrowDown=document.querySelector(".arrowDown"),allCars=document.querySelectorAll(".car"),allCarsYear=document.querySelectorAll(".car__year"),allCarsMake=document.querySelectorAll(".car .card-title"),allCarsTrim=document.querySelectorAll(".car__trim"),allCarsMileage=document.querySelectorAll(".car__mileage"),allCarsSold=document.querySelectorAll(".car__sold-mark"),selectedYear=filterYear.value,selectedMake=filterMake.value,selectedModel=filterModel.value,selectedTrim=filterTrim.value,selectedMileage=filterMileage.value,selectedFilter=filterMileage.value,subscrWrap=document.querySelector(".subscribe__input-wrap"),subscrInput=document.querySelector(".subscribe__input"),subscrInputMsg=document.querySelector(".subscribe__input-message"),subscrBtn=document.querySelector(".subscribe__btn"),accordeonBtns=document.querySelectorAll(".accordion-button");function deactSelects1(e){e.target.classList.contains("form-select")||selects.forEach(e=>e.classList.remove("active"))}function deactSelects2(){selects.forEach(e=>e.classList.remove("active"))}function activate(e){e.addEventListener("click",function(){let e="";this.classList.contains("active")&&(e="y"),selects.forEach(e=>e.classList.remove("active")),"y"===e?this.classList.remove("active"):this.classList.add("active")})}function filterCars(){let t=0;if(allCars.forEach(function(e){e.classList.remove("hidden"),e.classList.contains("unavailable")&&e.classList.add("hidden")}),"0"!==selectedYear&&allCarsYear.forEach(e=>e.innerHTML!==selectedYear?e.closest(".car").classList.add("hidden"):0),"0"!==selectedMake&&allCarsMake.forEach(e=>e.innerHTML.split(" ")[0]!==selectedMake?e.closest(".car").classList.add("hidden"):0),"0"!==selectedModel&&allCarsMake.forEach(function(e){e.innerHTML.split(" ").slice(1).join(" ")!==selectedModel&&e.closest(".car").classList.add("hidden")}),"0"!==selectedTrim&&allCarsTrim.forEach(e=>e.innerHTML!==selectedTrim?e.closest(".car").classList.add("hidden"):0),"0"!==selectedMileage){let s=selectedMileage.split("-");allCarsMileage.forEach(function(e){var t=e.innerHTML.split(",").join("");isInRange(t,s[0])&&!isInRange(t,s[1])||e.closest(".car").classList.add("hidden")})}allCars.forEach(e=>e.classList.contains("hidden")?0:t++),filtersBtn.innerHTML=`${t} cars`}function isInRange(e,t){return 0<e-t}function switcher(){let e=this.nextElementSibling;e.classList.contains("active")?e.classList.remove("active"):e.classList.add("active"),allCarsSold.forEach(e=>e.closest(".car").classList.toggle("unavailable"))}function styleInputOnFocus(){this.placeholder="",this.classList.remove("invalid-mail"),subscrWrap.classList.remove("invalid-mail"),subscrInputMsg.classList.remove("invalid-mail")}function validateMailOnInput(){this.value.match(/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/)?(this.classList.add("valid-mail"),subscrWrap.classList.add("valid-mail")):(this.classList.remove("valid-mail"),subscrWrap.classList.remove("valid-mail"))}function validateMailOnClick(){subscrInput.classList.contains("valid-mail")?(subscrInput.value="",subscrInput.classList.remove("valid-mail"),subscrWrap.classList.remove("valid-mail")):(subscrWrap.classList.add("invalid-mail"),subscrInput.classList.add("invalid-mail"),subscrInputMsg.classList.add("invalid-mail"))}function accordOnClick(e){e.addEventListener("click",function(){let e="";this.classList.contains("active")&&(e="y"),accordeonBtns.forEach(e=>e.classList.remove("active")),"y"===e?this.classList.remove("active"):this.classList.add("active")})}document.addEventListener("click",deactSelects1),document.addEventListener("contextmenu",deactSelects2),document.addEventListener("visibilitychange",deactSelects2),filtersBtn.innerHTML=`${allCars.length} cars`,filtersBtn.addEventListener("click",filterCars),filters.forEach(e=>activate(e)),checkbox.addEventListener("click",switcher),subscrInput.addEventListener("focus",styleInputOnFocus),subscrInput.addEventListener("blur",e=>e.target.placeholder="Enter your email"),subscrInput.addEventListener("input",validateMailOnInput),subscrBtn.addEventListener("click",validateMailOnClick),accordeonBtns.forEach(e=>accordOnClick(e)),filterYear.addEventListener("change",function(){selectedYear=this.value}),filterMake.addEventListener("change",function(){selectedMake=this.value}),filterModel.addEventListener("change",function(){selectedModel=this.value}),filterTrim.addEventListener("change",function(){selectedTrim=this.value}),filterMileage.addEventListener("change",function(){selectedMileage=this.value}),filterOffers.addEventListener("change",function(){selectedFilter=this.value;selectedFilter.match(/ascending/)?(arrowUp.classList.add("active"),arrowDown.classList.remove("active")):(arrowUp.classList.remove("active"),arrowDown.classList.add("active"))});